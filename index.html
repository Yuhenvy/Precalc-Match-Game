<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Precalculus Match</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f1f5f9;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .game {
      background: white;
      padding: 20px 24px 30px;
      border-radius: 16px;
      max-width: 900px;
      width: 100%;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      margin-bottom: 6px;
    }

    .info {
      text-align: center;
      margin-bottom: 16px;
      color: #555;
    }

    .stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 14px;
      font-weight: bold;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 14px;
    }

    .card {
      height: 120px;
      border-radius: 14px;
      background: #0f172a;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      text-align: center;
      padding: 10px;
      font-size: 14px;
      transition: transform 0.2s;
    }

    .card:hover {
      transform: scale(1.05);
    }

    .card.flipped {
      background: #e2e8f0;
      color: #0f172a;
    }

    .card.matched {
      background: #22c55e;
      color: white;
    }

    .star {
      text-align: center;
      font-size: 32px;
      margin-top: 20px;
      font-weight: bold;
    }

    button {
      display: block;
      margin: 20px auto 0;
      padding: 10px 18px;
      border-radius: 10px;
      border: none;
      background: #2563eb;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>

<body>
  <div class="game">
    <h1>Precalculus Match</h1>
    <div class="info">Match the expression to its meaning, identity, or application</div>

    <div class="stats">
      <div>Attempts: <span id="attempts">0</span></div>
      <div>Matches: <span id="matches">0</span></div>
      <div>Time: <span id="time">0</span>s</div>
    </div>

    <div class="grid" id="grid"></div>

    <div class="star" id="star" style="display:none"></div>

    <button onclick="resetGame()">Reset Game</button>
  </div>

  <script>
    // ===== TIMER =====
    let time = 0;
    let timerInterval = null;

    function startTimer() {
      clearInterval(timerInterval);
      time = 0;
      document.getElementById("time").textContent = time;
      timerInterval = setInterval(() => {
        time++;
        document.getElementById("time").textContent = time;
      }, 1000);
    }

    function stopTimer() {
      clearInterval(timerInterval);
    }
    // =================

    // ===== PRECALCULUS CONTENT =====
    const PAIRS = [
      // Identifying / transforming functions
      { id: 1, a: "y = (x − 2)²", b: "Parabola shifted right 2 units" },
      { id: 2, a: "y = 2·3ˣ", b: "Exponential growth" },

      // Equations to graphs / systems
      { id: 3, a: "y = mx + b", b: "Linear function" },
      { id: 4, a: "x + y = 5", b: "Linear equation (system-ready)" },

      // Polar / complex
      { id: 5, a: "3 + 4i", b: "Complex number" },
      { id: 6, a: "(r, θ)", b: "Polar coordinates" },

      // Logs / exponentials
      { id: 7, a: "log(ab)", b: "log a + log b" },
      { id: 8, a: "eˣ = 5", b: "Exponential equation" },

      // Trig / inverse trig
      { id: 9, a: "sin(θ) = opposite / hypotenuse", b: "SOH from SOHCAHTOA" },
      { id: 10, a: "sin⁻¹(1/2)", b: "π/6" },

      // Real-world applications
      { id: 11, a: "Population growth model", b: "Exponential function" },
      { id: 12, a: "Height vs time", b: "Quadratic model" }
    ];

    let cards = [];
    let flipped = [];
    let matched = [];
    let attempts = 0;

    const grid = document.getElementById("grid");
    const attemptsEl = document.getElementById("attempts");
    const matchesEl = document.getElementById("matches");
    const starEl = document.getElementById("star");

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function setup() {
      startTimer();
      flipped = [];
      matched = [];
      attempts = 0;
      attemptsEl.textContent = 0;
      matchesEl.textContent = 0;
      starEl.style.display = "none";

      cards = shuffle(
        PAIRS.flatMap(p => [
          { pair: p.id, text: p.a },
          { pair: p.id, text: p.b }
        ])
      );

      grid.innerHTML = "";

      cards.forEach((card, i) => {
        const div = document.createElement("div");
        div.className = "card";
        div.textContent = "?";
        div.onclick = () => flipCard(i, div);
        grid.appendChild(div);
      });
    }

    function flipCard(i, el) {
      if (flipped.length === 2) return;
      if (flipped.some(f => f.i === i)) return;
      if (matched.includes(cards[i].pair)) return;

      el.classList.add("flipped");
      el.textContent = cards[i].text;
      flipped.push({ i, el });

      if (flipped.length === 2) {
        attempts++;
        attemptsEl.textContent = attempts;

        const [a, b] = flipped;
        if (cards[a.i].pair === cards[b.i].pair) {
          matched.push(cards[a.i].pair);
          a.el.classList.add("matched");
          b.el.classList.add("matched");
          flipped = [];
          matchesEl.textContent = matched.length;

          if (matched.length === PAIRS.length) {
            stopTimer();
            starEl.style.display = "block";
            if (time <= 90) {
    starEl.textContent = "⭐ You earned a star!";
  } else {
  starEl.textContent = "Completed — try for under 90 seconds!";
  }
          }
        } else {
          setTimeout(() => {
            a.el.classList.remove("flipped");
            b.el.classList.remove("flipped");
            a.el.textContent = "?";
            b.el.textContent = "?";
            flipped = [];
          }, 800);
        }
      }
    }

    function resetGame() {
      stopTimer();
      setup();
    }

    setup();
  </script>
</body>
</html>

