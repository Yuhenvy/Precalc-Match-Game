<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Precalculus Math Match</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f1f5f9;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .game {
      background: white;
      padding: 20px 24px 30px;
      border-radius: 16px;
      max-width: 900px;
      width: 100%;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      margin-bottom: 6px;
    }
    .info {
      text-align: center;
      margin-bottom: 16px;
      color: #555;
    }
    .stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 14px;
      font-weight: bold;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 14px;
    }
    .card {
      height: 120px;
      border-radius: 14px;
      background: #0f172a;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      transition: transform 0.2s, background 0.2s;
      text-align: center;
      padding: 10px;
      font-size: 14px;
    }
    .card:hover {
      transform: scale(1.05);
    }
    .card.flipped {
      background: #e2e8f0;
      color: #0f172a;
      cursor: default;
    }
    .card.matched {
      background: #22c55e;
      color: white;
      cursor: default;
    }
    .star {
      text-align: center;
      font-size: 48px;
      margin-top: 20px;
    }
    button {
      display: block;
      margin: 20px auto 0;
      padding: 10px 18px;
      border-radius: 10px;
      border: none;
      background: #2563eb;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #1d4ed8;
    }
  </style>
</head>
<body>
  <div class="game">
    <h1>Precalculus Match</h1>
    <div class="info">Match the expression to its meaning, identity, or graph</div>

    <div class="stats">
      <div>Attempts: <span id="attempts">0</span></div>
      <div>Matches: <span id="matches">0</span></div>
      <div>Time: <span id="time">0</span>s</div>
    </div>
      <div>Matches: <span id="matches">0</span></div>
    </div>

    <div class="grid" id="grid"></div>

    <div class="star" id="star" style="display:none">⭐ You Win!</div>

    <button onclick="resetGame()">Reset Game</button>
  </div>

  <script>
    const PAIRS = [
      // Trig right triangles
      { id: 1, a: "sin(θ) = opposite / hypotenuse", b: "SOH from SOHCAHTOA" },
      { id: 2, a: "cos(θ) = adjacent / hypotenuse", b: "CAH from SOHCAHTOA" },
      { id: 3, a: "tan(θ) = opposite / adjacent", b: "TOA from SOHCAHTOA" },

      // Trig identities
      { id: 4, a: "sin²x + cos²x", b: "= 1 (Pythagorean identity)" },
      { id: 5, a: "1 + tan²x", b: "= sec²x" },

      // Logs
      { id: 6, a: "log(ab)", b: "log a + log b" },
      { id: 7, a: "log(aᵏ)", b: "k log a" },

      // Other precalc
      { id: 8, a: "y = a·bˣ", b: "Exponential growth/decay" },
      { id: 9, a: "Domain of √(x − 3)", b: "x ≥ 3" }
    ];

    let cards = [];
    let flipped = [];
    let matched = [];
    let attempts = 0;
    let time = 0;
    let timerInterval = null;

    const grid = document.getElementById("grid");
    const attemptsEl = document.getElementById("attempts");
    const matchesEl = document.getElementById("matches");
    const timeEl = document.getElementById("time");
    const starEl = document.getElementById("star");

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function setup() {
      if (timerInterval) clearInterval(timerInterval);
      time = 0;
      timeEl.textContent = 0;
      timerInterval = setInterval(() => {
        time++;
        timeEl.textContent = time;
      }, 1000);
      const deck = PAIRS.flatMap(p => [
        { key: `a-${p.id}`, pair: p.id, text: p.a },
        { key: `b-${p.id}`, pair: p.id, text: p.b }
      ]);

      cards = shuffle(deck);
      grid.innerHTML = "";

      cards.forEach((card, i) => {
        const div = document.createElement("div");
        div.className = "card";
        div.textContent = "?";
        div.onclick = () => flipCard(i, div);
        grid.appendChild(div);
      });
    }

    function flipCard(index, element) {
      if (flipped.length === 2) return;
      if (flipped.some(f => f.index === index)) return;
      if (matched.includes(cards[index].pair)) return;

      element.classList.add("flipped");
      element.textContent = cards[index].text;
      flipped.push({ index, element });

      if (flipped.length === 2) {
        attempts++;
        attemptsEl.textContent = attempts;

        const [c1, c2] = flipped;
        if (cards[c1.index].pair === cards[c2.index].pair) {
          matched.push(cards[c1.index].pair);
          c1.element.classList.add("matched");
          c2.element.classList.add("matched");
          matchesEl.textContent = matched.length;
          flipped = [];

          if (matched.length === PAIRS.length) {
            clearInterval(timerInterval);
            starEl.style.display = "block";
            starEl.innerHTML = `⭐ You Win!<br>Time: ${time}s`;
          }
        } else {
          setTimeout(() => {
            c1.element.classList.remove("flipped");
            c2.element.classList.remove("flipped");
            c1.element.textContent = "?";
            c2.element.textContent = "?";
            flipped = [];
          }, 900);
        }
      }
    }

    function resetGame() {
      clearInterval(timerInterval);
      flipped = [];
      matched = [];
      attempts = 0;
      attemptsEl.textContent = 0;
      matchesEl.textContent = 0;
      starEl.style.display = "none";
      setup();
    }

    setup();
  </script>
</body>
</html>
